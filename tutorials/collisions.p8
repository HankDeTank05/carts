pico-8 cartridge // http://www.pico-8.com
version 29
__lua__
--collision library
--andy c
function collision(r1x,r1y,r1w,r1h,r2x,r2y,r2w,r2h) --rectangular collisions
	if((r1x < r2x + r2w) and (r1x + r1w > r2x) and (r1y < r2y + r2h) and (r1y + r1h > r2y)) then
		return true
	else
		return false
	end
end

--[[
	for circular collisions use: {where c is circle and r is radius}
	if distance(c1x,c1y,c2x,c2y) <= 1/2 * (c1r + c2r) then
		return true
	end
	distance can be found in my lookat library
--]]

function map_collision(r1x,r1y,r1w,r1h,falg)
	check = false
	for i=0,15,1 do
		for j=0,15,1 do
			if collision(r1x,r1y,r1w,r1h,i*8,j*8,8,8) and fget(mget(i,j),flag) then
				check = true
			end
		end
	end
	return check
end

--example
function _init()
	r1 = {x=rnd(97), y=rnd(33)}
	r2 = {x=rnd(97), y=rnd(33)}
	p = {x=0, y=72}
end

function _update60()
	if btnp(‚ùé) or btnp(üÖæÔ∏è) then
		run()
	end
	if btn(‚û°Ô∏è) then
		if p.x < 120 then
			p.x += 1
		end
	end
	if btn(‚¨ÖÔ∏è) then
		if p.x > 0 then
			p.x -= 1
		end
	end
	if btn(‚¨áÔ∏è) then
		if p.y < 120 then
			p.y += 1
		end
	end
	if btn(‚¨ÜÔ∏è) then
		if p.y > 63 then
			p.y -= 1
		end
	end
end

function _draw()
	cls()
	rect(r1.x,r1.y,r1.x+30,r1.y+30,8)
	rect(r2.x,r2.y,r2.x+30,r2.y+30,12)
	map(0,0,0,0,16,16)
	spr(1,p.x,p.y)
	print(collision(r1.x,r1.y,30,30,r2.x,r2.y,30,30),0,0,7)
	print(map_collision(p.x,p.y,8,8,0),0,64)
end
__gfx__
00000000700000077777777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000111007dddddd500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000111007dddddd500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000010007dddddd500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000001111107dddddd500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000010007dddddd500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000101007dddddd500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000700101075555555500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0002020000000000020202020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000020202000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000020000000000000002020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
