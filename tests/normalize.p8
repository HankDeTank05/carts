pico-8 cartridge // http://www.pico-8.com
version 29
__lua__

function _init()
	speed=30
	pos={}
	pos.x=63
	pos.y=63
	
	pos.dx=0
	pos.dy=0
	
	pos.nx=0
	pos.ny=0
end

function _update60()
	if btn(⬅️) then
		pos.dx=-1
	elseif btn(➡️) then
		pos.dx=1
	else
		pos.dx=0
	end
	
	if btn(⬆️) then
		pos.dy=-1
	elseif btn(⬇️) then
		pos.dy=1
	else
		pos.dy=0
	end
	
	if not(pos.dx==0 and pos.dy==0) then
		pos.nx,pos.ny=normalize(pos.dx*speed,pos.dy*speed)
	else
		pos.nx=0
		pos.ny=0
	end

	pos.x=63+pos.nx*speed
	pos.y=63+pos.ny*speed

end

function _draw()
	cls()
	line(63,61,63,65,7)
	line(61,63,65,63,7)
	circ(63,63,speed,1)
	line(pos.x,pos.y,pos.x,pos.y,8)
	circ(pos.x,pos.y,5)
	print("dx="..pos.dx.." dy="..pos.dy)
	print("nx="..pos.nx.." ny="..pos.ny)
end

function normalize(x,y)
	local rad=atan2(x,y)
	return cos(rad),sin(rad)
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
