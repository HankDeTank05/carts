pico-8 cartridge // http://www.pico-8.com
version 35
__lua__
--house explorer (working title)
--a game jam project

function _init()

	player=init_player()
	
end

function _update60()

	update_player(player)
	
end

function _draw()
	
	cls()
	draw_map(player.xpos)
	draw_player(player)

end

--[[

credits
-------

programming:  henry holman

game design:  ruben rojas
              sj singh
              joseph turzitti
              henry holman
             
level design: ruben rojas
              henry holman
              
spritework:   sj singh
              henry holman
              
story:        ruben rojas
              joseph turzitti

--]]
-->8
--tab 1: player

function init_player()
	
	local player={
		xpos=0,
		floor=1,
		speed=1,
		dir=-1, --left=-1, right=1
	}
	
	return player
	
end

function update_player(plr)
	
	if btn(⬅️) then
		plr.dir=-1
		plr.xpos+=plr.speed
	elseif btn(➡️) then
		plr.dir=1
		plr.xpos-=plr.speed
	end
	
	if btnp(⬆️) then
		if plr.floor<2 then
			plr.floor+=1
		end
	elseif btnp(⬇️) then
		if plr.floor>0 then
			plr.floor-=1
		end
	end
	
end

function draw_player(plr)

	-- determine whether or not to
	-- horizontally flip player
	-- sprite based on the
	-- direction the player is
	-- facting
	assert(plr.dir==-1 or plr.dir==1)
	local flipped=false
	if plr.dir==1 then
		flipped=true
	end
	
	-- determine the vertical
	-- position at which to draw
	-- the player based on which
	-- floor of the house they're
	-- on
	assert(plr.floor==0 or plr.floor==1 or plr.floor==2)
	local ypos=-1
	if plr.floor==2 then
		ypos=8
	elseif plr.floor==1 then
		ypos=8+40
	elseif plr.floor==0 then
		ypos=8+40+40
	end

	-- draw player sprite
	sspr(0, 0,    -- sx, sy
	     16,32,   -- sw, sh
	     56,ypos, -- dx, dy
		    16,32,   -- dw, dh
		    flipped,false)
		         -- flip_x, flip_y

end
-->8
--tab 2: map control

function init_map(flr_num)
	
	assert(flr_num==1)
	
end

function update_map()
end

function draw_map(plr_x)
	
	map(0,0,plr_x,87,16,16)
	
end
__gfx__
80000fffff90000000000ffffff000000000088000000000000000000000000000aaaa0000000000000000880067760055111551525255525553555354544544
000ffffffff990000000f0f00f0f0000880088800000000000000000000000000aa99aa077777770000006680677776055115115552225225533535355545454
00fffffffffff9000000f0f00f0f00008888880000000000000000000000000009a00a9007667670000066800049940051515555525255525353555354545554
0fffffffffffff900000f0f00f0f000008888800000000000000000000000000009aa900777777700d0668000066660055515115222222223333333344445454
0fffffffffffff900000f0f00f0f000000888880000000000000000000000000000aa0000767667000d660000065560011111111222222225553535344444444
fffffffffffffff90000f0f00f0f00000888088800000000000000000000000000aaa00077777770011d00000065550055515151255252525353555354454444
fffffffffffffff90000f0f00f0f000008800088000000000000000000000000009aaa00076667701110d0000066660015115551522255525553555354454444
fffffffffffffff90000ffffffff0000000000000000000000000000000000000009990077777770010000000049940015115151255252523333333355455444
fffffffffffffff9000dddddddddd000000000000000000000000000000000000000000000000000000000000000000055888855000000000000000000000000
fffffffffffffff900dddddddddddd00000000000000000000000000000000000000000000000000000000000000000055888588000000000000000000000000
fffffffffffffff900ffffffffffff00000000000000000000000000000000000000000000000000000000000000000058588885000000000000000000000000
0fffffffffffff9000f0500000050f00000000000000000000000000000000000000000000000000000000000000000055588558000000000000000000000000
0fffffffffffff9000f0400000040f00000000000000000000000000000000000000000000777000000000000000000088888888000000000000000000000000
00fffffffffff90000f0400000040f000000000000000000000000000000000000a00aa007767767000000000f65f70058585558000000000000000000000000
000ffffffff9900000f0000000000f00000000000000000000000000000000000a0aa0007767767000dd00000965960055588588000000000000000000000000
00000fffff90000000f0000000000f00000000000000000000000000000000000aa000000007770011d6668804664d0055588588000000000000000000000000
000ccccccccc1000000000000000000000000000000000000000000000000d000000000000000000000000000000011111111111111000000000000000000000
00ccccccccccc10000000444444000000000000000000000000000000000d0d000009999999999999999000000011dddddddddddddd110000000000000000000
00ccccccccccc100000445555554400000d0000000000000000000000000d0d0000999999999999999999000001dd11111111111111dd1000000000000000000
00ccccccccccc10000455444444554000d0d000000000000000000000000d00d00999999999999999999990001d111111111111111111d100000000000000000
00ccccccccccc10000454444444454000d0d000000000000000000000000d00d09999999999999999999999001d111111111111111111d100000000000000000
00ccccccccccc1000454444444444540d00eeeeeeeeeeeeeeeeee7777777700d9999999999999999999999991d11111111111111111111d10000000000000000
00ccccccccccc1000555444444445550d0eeeeeeeeeeeeeeeeeeee777777770d4444444444444444444444441ddddd111111111111ddddd10000000000000000
00ccccccccccc1005444544444454445deeeeeeeeeeeeeeeeeeeeee77777777d400010000000000000010004d11111d1111111111d11111d0000000000000000
00ccccccccccc1005545544444455455deeeeeeeeeeeeeeeeeeeeeee7777777d400050000000000000050004dddd1dd1111111111dd1dddd0000000000000000
00ccccccccccc1004454555555554544d888888888888888888888886666666d4000500000000000000500041111d1dddddddddddd1d11110000000000000000
00ccccccccccc1004454444444444544d888888888888888888888886666666d4000500000000000000500041111d11111111111111d11110000000000000000
00ccccccccccc1004455555555555544dddddddddddddddddddddddddddddddd4000500000000000000500041111dddddddddddddddd11110000000000000000
00ccccccccccc1004454444444444544d050000000000000000000000000050d4000000000000000000000041111d11111111111111d11110000000000000000
00ccccccccccc1004544444444444454d010000000000000000000000000010d4000000000000000000000041111d11111111111111d11110000000000000000
00ccccccccccc1004555555555555554d000000000000000000000000000000d4000000000000000000000041111d11111111111111d11110000000000000000
00ccccccccccc1004440000000000444d000000000000000000000000000000d4000000000000000000000041111d11111111111111d11110000000000000000
55555555555555555555555555555555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
54444444444444455444000000000005077066600070666007706660000000000000000000000000000000000000000000000000000000000000000000000000
54444444444444455444444400000005700760060770600670076006000000000000000000000000000000000000000000000000000000000000000000000000
54444444444444455444444444400005000766600070666070776660000000000000000000000000000000000000000000000000000000000000000000000000
54445444444445455444444444400005007060060070600677076006000000000000000000000000000000000000000000000000000000000000000000000000
54445444444445455445444454400005070060060070600670076006000000000000000000000000000000000000000000000000000000000000000000000000
54445444444445455445444454400005777766667777666607706666000000000000000000000000000000000000000000000000000000000000000000000000
54445444444445455445444454400005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
54445444444445455445444454400005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
54445444444445455445444444400005077060060070600607706006000000000000000000000000000000000000000000000000000000000000000000000000
54445444454444455445445444400005700766660770666670076666000000000000000000000000000000000000000000000000000000000000000000000000
54444444454444455444445444400005000760660070606670776066000000000000000000000000000000000000000000000000000000000000000000000000
54444444454444455444445444400005007060060070600677076006000000000000000000000000000000000000000000000000000000000000000000000000
54444444444444455444444444400005070060060070600670076006000000000000000000000000000000000000000000000000000000000000000000000000
54444444444994455444444444990005777760067777600607706006000000000000000000000000000000000000000000000000000000000000000000000000
54444544449999455444444499990005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
54444544449999455444544499990005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
54444544445995455444544455990005077066660070666607706666000000000000000000000000000000000000000000000000000000000000000000000000
54444544445555455444544455500005700760000770600070076000000000000000000000000000000000000000000000000000000000000000000000000000
54444544444554455444444445500005000760000070600070776000000000000000000000000000000000000000000000000000000000000000000000000000
54444444444444455444444444400005007066600070666077076660000000000000000000000000000000000000000000000000000000000000000000000000
54444444444444455444444444400005070060000070600070076000000000000000000000000000000000000000000000000000000000000000000000000000
54444444444444455444444444400005777760007777600007706000000000000000000000000000000000000000000000000000000000000000000000000000
54454444454444455454444544400005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
54454444454444455454444544400005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
54454444454444455454444544400005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
54454444454444455454444545400005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
54444444454454455444444445400005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
54444444444454455444444444400005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
54444444444444455444444444400005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
54444444444444455444444400000005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
54444444444444455444000000000005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0d0d0d0d0d0d0d0d0e0e0e0e0e0e0e0e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0d0d0d0d0d0d0d0d0e0e0e0e0e0e0e0e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0d0d0d0d0d0d0d0d0e0e0e0e0e0e0e0e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0d2829292a0d0d0d0e0e0e0e0e0e0e0e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0d380d0d3a0d0d0d0e0e0e0e0e0e0e0e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
